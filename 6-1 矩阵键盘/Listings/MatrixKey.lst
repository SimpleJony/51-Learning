C51 COMPILER V9.60.7.0   MATRIXKEY                                                         10/29/2025 23:02:01 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MATRIXKEY
OBJECT MODULE PLACED IN .\Objects\MatrixKey.obj
COMPILER INVOKED BY: E:\Software\Keil_v5\C51\BIN\C51.EXE MatrixKey.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\MatrixKey.lst) OBJECT(.\Objects\MatrixKey.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          
   4          /**
   5            * @brief 矩阵键盘读取按键键码
   6            * @param 无
   7            * @retval KeyNumber 按下按键的键码值
   8                                  如果按键按下不放就会停留在此处，松手及返回，没有即返回0
   9            *
  10            */
  11          unsigned char MatrixKey()
  12          {
  13   1              unsigned char KeyNumber = 0;
  14   1              P1 = 0xFF;
  15   1              P1_3 = 0;
  16   1              if (P1_7 == 0)
  17   1              {
  18   2                      Delay(20);
  19   2                      while(P1_7 == 0);
  20   2                      Delay(20);
  21   2                      KeyNumber = 1;
  22   2              }
  23   1              if (P1_6 == 0)
  24   1              {
  25   2                      Delay(20);
  26   2                      while(P1_6 == 0);
  27   2                      Delay(20);
  28   2                      KeyNumber = 5;
  29   2              }
  30   1              if (P1_5 == 0)
  31   1              {
  32   2                      Delay(20);
  33   2                      while(P1_5 == 0);
  34   2                      Delay(20);
  35   2                      KeyNumber = 9;
  36   2              }
  37   1              if (P1_4 == 0)
  38   1              {
  39   2                      Delay(20);
  40   2                      while(P1_4 == 0);
  41   2                      Delay(20);
  42   2                      KeyNumber = 13;
  43   2              }
  44   1              
  45   1              P1 = 0xFF;
  46   1              P1_2 = 0;
  47   1              if (P1_7 == 0)
  48   1              {
  49   2                      Delay(20);
  50   2                      while(P1_7 == 0);
  51   2                      Delay(20);
  52   2                      KeyNumber = 2;
  53   2              }
  54   1              if (P1_6 == 0)
C51 COMPILER V9.60.7.0   MATRIXKEY                                                         10/29/2025 23:02:01 PAGE 2   

  55   1              {
  56   2                      Delay(20);
  57   2                      while(P1_6 == 0);
  58   2                      Delay(20);
  59   2                      KeyNumber = 6;
  60   2              }
  61   1              if (P1_5 == 0)
  62   1              {
  63   2                      Delay(20);
  64   2                      while(P1_5 == 0);
  65   2                      Delay(20);
  66   2                      KeyNumber = 10;
  67   2              }
  68   1              if (P1_4 == 0)
  69   1              {
  70   2                      Delay(20);
  71   2                      while(P1_4 == 0);
  72   2                      Delay(20);
  73   2                      KeyNumber = 14;
  74   2              }
  75   1              
  76   1              P1 = 0xFF;
  77   1              P1_1 = 0;
  78   1              if (P1_7 == 0)
  79   1              {
  80   2                      Delay(20);
  81   2                      while(P1_7 == 0);
  82   2                      Delay(20);
  83   2                      KeyNumber = 3;
  84   2              }
  85   1              if (P1_6 == 0)
  86   1              {
  87   2                      Delay(20);
  88   2                      while(P1_6 == 0);
  89   2                      Delay(20);
  90   2                      KeyNumber = 7;
  91   2              }
  92   1              if (P1_5 == 0)
  93   1              {
  94   2                      Delay(20);
  95   2                      while(P1_5 == 0);
  96   2                      Delay(20);
  97   2                      KeyNumber = 11;
  98   2              }
  99   1              if (P1_4 == 0)
 100   1              {
 101   2                      Delay(20);
 102   2                      while(P1_4 == 0);
 103   2                      Delay(20);
 104   2                      KeyNumber = 15;
 105   2              }
 106   1              
 107   1              P1 = 0xFF;
 108   1              P1_0 = 0;
 109   1              if (P1_7 == 0)
 110   1              {
 111   2                      Delay(20);
 112   2                      while(P1_7 == 0);
 113   2                      Delay(20);
 114   2                      KeyNumber = 4;
 115   2              }
 116   1              if (P1_6 == 0)
C51 COMPILER V9.60.7.0   MATRIXKEY                                                         10/29/2025 23:02:01 PAGE 3   

 117   1              {
 118   2                      Delay(20);
 119   2                      while(P1_6 == 0);
 120   2                      Delay(20);
 121   2                      KeyNumber = 8;
 122   2              }
 123   1              if (P1_5 == 0)
 124   1              {
 125   2                      Delay(20);
 126   2                      while(P1_5 == 0);
 127   2                      Delay(20);
 128   2                      KeyNumber = 12;
 129   2              }
 130   1              if (P1_4 == 0)
 131   1              {
 132   2                      Delay(20);
 133   2                      while(P1_4 == 0);
 134   2                      Delay(20);
 135   2                      KeyNumber = 16;
 136   2              }
 137   1              
 138   1              return KeyNumber;
 139   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    393    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
